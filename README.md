A short code example implemented/refactored by me considering legacy parts of the code.